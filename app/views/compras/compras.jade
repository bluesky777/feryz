.row(ng-if="!mostrandoCompras")
	.col-lg-12
		.panel.panel-default.panel-hovered.mb20
			.panel-heading Nueva compra
			
			.panel-body(style="overflow: auto")
				.row
					.form-group.col-lg-2.col-sm-4.col-xs-12(style="margin-bottom: 12px;")
						.controls
							.input-group
								span.input-group-addon()
									i.fa.fa-calendar
								input.form-control.active#fecha-compra-new(type="text" uib-datepicker-popup="dd-MMMM-yyyy" ng-model="compraNueva.fecha" is-open="data.isOpenNew" ng-click="data.isOpenNew = true" max-date="'2030-12-12'" datepicker-options="dateOptions" close-text="Aceptar" current-text="Hoy" clear-text="Borrar" placeholder="Fecha")
									
					.col-lg-10.col-sm-8.col-xs-12.formato-total(style="margin-top: 20px;")
						span(style="background-color: #337ab7; padding: 5px; border-radius:4px; color:white")
							| {{totalCompraValue(opcionesGrid.data)}}
						a(ng-click="conIva=!conIva" style="position: relative" href="")
							span(ng-show="conIva" style="position: absolute; top: -30px; right: 0; width: 200px; text-decoration: underline;") 
								| Con iva
							span(ng-hide="conIva" style="position: absolute; top: -30px; right: 0; width: 200px; text-decoration: underline;") 
								| Sin iva
				
				.row
			
					.form-group.col-lg-9.col-sm-8.col-xs-12(style="margin-bottom: 10px;")
						label(style="font-weight: 400; margin-bottom:0") Proveedor
						ui-select(ng-model="compraNueva.proveedor" style="width: 100%;" autofocus on-select="proveedorSeleccionado($item, $model)" )
							ui-select-match(placeholder="Proveedor" allow-clear="true") {{$select.selected.nombre}}
							ui-select-choices(repeat="proveedor in proveedores | filter: $select.search")
								div(ng-bind-html="proveedor.nombre | highlight: $select.search")

					.col-lg-3.col-sm-4.col-xs-12
						md-button.md-raised.md-success(type="button" ng-click="guardarCompra()" style="margin: 8px 0;") 
							i.fa.fa-save  
							|   Guardar

						md-button.md-raised.md-success(type="button" ng-click="guardarCompraImprimir()" style="margin: 8px 0;") 
							i.fa.fa-print  
							|   e imprimir

						
				.row
			
					.form-group.col-lg-3.col-sm-4.col-xs-12(style="margin-bottom: 10px;")
						label(style="font-weight: 400; margin-bottom:0") CÃ³digo de barras
						ui-select(ng-model="detalle.codigo_barras" style="width: 100%;" on-select="codigoBarrasSeleccionado($item, $model)" focus-on="focusOnCodigoBarras")
							ui-select-match(placeholder="Codigo de barras" allow-clear="true") {{$select.selected.codigo_barras }}
							ui-select-choices(repeat="codigos in codigos_barras | filter: $select.search")
								div(ng-bind-html="codigos.codigo_barras | highlight: $select.search")
				
					.form-group.col-lg-9.col-sm-8.col-xs-12(style="margin-bottom: 10px;")
						label(style="font-weight: 400; margin-bottom:0") Nombre
						ui-select(ng-model="detalle.producto" style="width: 100%;" on-select="productoSeleccionado($item, $model)" focus-on="focusOnProducto")
							ui-select-match(placeholder="Producto" allow-clear="true") {{$select.selected.nombre}}
							ui-select-choices(repeat="producto in productos | filter: $select.search")
								div(ng-bind-html="producto.nombre | highlight: $select.search")

				.row(style="margin-top: 10px;")
					.col-lg-2.col-sm-3.col-xs-12
					.col-lg-2.col-sm-3.col-xs-12(style="height: 40px;")
						div.pointer(ng-click="clickPrecioVentaConIva(detalle.precio_venta + (detalle.precio_venta * detalle.iva / 100))" 
							style="color: #444" ng-show="mostrarPrecioVentaConIva" 
							uib-tooltip="Click para asignar")
							| Con iva: {{ detalle.precio_venta + (detalle.precio_venta * detalle.iva / 100) | currency }}

					.col-lg-1.col-sm-1.col-xs-12(style="padding: 0")
					.col-lg-1.col-sm-1.col-xs-12(style="padding: 0")

				.row(style="margin-top: 15px;")
					.col-lg-2.col-sm-3.col-xs-12
						md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
							label Precio compra
							input(ng-model="detalle.precio_compra" ui-money-mask maxlength="20" focus-me="focusOnPrecioCompra")
					.col-lg-2.col-sm-3.col-xs-12
						md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
							label Precio venta
							input(ng-model="detalle.precio_venta" ui-money-mask maxlength="20" focus-me="focusOnPrecioVenta")

					.col-lg-1.col-sm-1.col-xs-12(style="padding: 0")
						md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
							label Cantidad
							input(ng-model="detalle.cantidad" type="number" min="0")
					.col-lg-1.col-sm-1.col-xs-12(style="padding: 0")
						md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
							label Iva
							input(ng-model="detalle.iva" ui-percentage-mask="0" ui-percentage-value)
					
					.col-lg-2.col-sm-2.col-xs-12
						md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
							label Total
							input(value="{{totalDetalle()}}" disabled style="color: black; font-weight: 500")

					.col-lg-1.col-sm-2.col-xs-12
						button.btn.btn-primary(ng-click="agregarProducto()" ng-disabled="agregando_producto") 
							i.fa.fa-plus



				div(ui-grid="opcionesGrid" ui-grid-edit ui-grid-resize-columns ui-grid-cellnav ui-grid-auto-resize ng-style="{height: altura+'px'}")



a(href="" ng-show="!mostrandoCompras" ng-click="mostrarCompras()" style="font-weight: 500; font-size: 30px;") Mostrar compras

.row(ng-if="mostrandoCompras")
	.col-lg-12
		.panel.panel-default.panel-hovered.mb20
			.panel-heading Compras
			
			.panel-body(style="overflow: auto")
				

				md-button(ng-click="ocultarCompras()" class="md-raised md-primary") Ocultar compras


				div(ui-grid="gridCompras" ui-grid-edit ui-grid-resize-columns ui-grid-cellnav ui-grid-auto-resize style="height: 400px")

