.row
	.col-lg-12
		.panel.panel-default.panel-hovered.mb20(ng-show="creando" )
			.panel-heading(style="margin-bottom: 10px;") Nuevo producto

			.panel-body
				div
					form(ng-submit="guardarProducto()")

						.row
							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Código de barras
									input(ng-model="prodNuevo.codigo_barras" focus-me="focusOnNuevo")
							.col-lg-8
								angular-barcode(ng-model="prodNuevo.codigo_barras" bc-options="bc" bc-class="barcode" bc-type="img")

						.row
							.col-lg-4
								//md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Nombre
									input(ng-model="prodNuevo.nombre" required)
								md-autocomplete(md-search-text="prodNuevo.nombre" md-dropdown-items="8"
									md-items="item in resultProductos(prodNuevo.nombre)" md-item-text="item.nombre"
									md-floating-label="Nombre producto" md-input-minlength="2"
									md-no-cache="false")

									span(md-highlight-text="prodNuevo.nombre") {{item.nombre}}


							span(ng-if="false")
								.form-group.col-lg-4.col-sm-12.col-xs-12
									label Unidad de medida
									ui-select(ng-model="prodNuevo.unidad_medida" style="width: 100%;")
										ui-select-match(placeholder="Unidad" allow-clear="true") {{$select.selected.unidad}}
										ui-select-choices(repeat="unidad in unidades | filter: $select.search")
											div(ng-bind-html="unidad.unidad | highlight: $select.search")

							.form-group.col-lg-4.col-sm-12.col-xs-12(style="margin-bottom: 20px;")
								label Categoría
								ui-select(ng-model="prodNuevo.categoria" style="width: 100%;")
									ui-select-match(placeholder="Categoría" allow-clear="true") {{$select.selected.nombre}}
									ui-select-choices(repeat="categoria in categorias | filter: $select.search")
										div(ng-bind-html="categoria.nombre | highlight: $select.search")


						.row
							.col-lg-4.col-sm-6.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Precio costo $
									input(ng-model="prodNuevo.precio_costo" type="text" ui-money-mask="USER.deci_entrada" maxlength="20")

							.col-lg-4.col-sm-6.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Precio venta $
									input(ng-model="prodNuevo.precio_venta" type="text" ui-money-mask="USER.deci_salida" maxlength="20")


							.col-lg-4.col-sm-12.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Cantidad mínima
									input(ng-model="prodNuevo.cantidad_minima" type="number" min="0")

						.row
							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Nota
									input(ng-model="prodNuevo.nota")

							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Iva %
									input(type="text" ng-model="prodNuevo.iva" ui-percentage-mask="0" ui-percentage-value required  list="ivas-comunes")


							.col-lg-4
								.checkbox
									label
										input(type="checkbox" ng-model="prodNuevo.activo" ng-true-value="1" ng-false-value="0")
										| Activo




						.row
							.col-lg-12(style="text-align: center;margin-bottom: 40px")
								md-button.md-raised.md-default(type="button" ng-click="creando=false") Cancelar

								md-button.md-raised.md-primary(type="submit" ng-disabled="guardando") Guardar

.row
	.col-lg-12
		.panel.panel-default.panel-hovered.mb20(ng-show="editando" )
			.panel-heading(style="margin-bottom: 10px;") Editar producto

			.panel-body
				div(ng-show="editando")
					form(ng-submit="actualizarProducto()")

						.row
							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Código de barras
									input(ng-model="prodActualizar.codigo_barras" focus-me="focusOnEdit")
							.col-lg-8
								angular-barcode(ng-model="prodActualizar.codigo_barras" bc-options="bc" bc-class="barcode" bc-type="img")

						.row
							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Nombre
									input(ng-model="prodActualizar.nombre" required)



							span(ng-if="false")
								.form-group.col-lg-4.col-sm-12.col-xs-12
									label Unidad de medida
									ui-select(ng-model="prodActualizar.unidad_medida" style="width: 100%;")
										ui-select-match(placeholder="Unidad" allow-clear="true") {{$select.selected.unidad}}
										ui-select-choices(repeat="unidad in unidades | filter: $select.search")
											div(ng-bind-html="unidad.unidad | highlight: $select.search")

							.form-group.col-lg-4.col-sm-12.col-xs-12(style="margin-bottom: 20px;")
								label Categoría
								ui-select(ng-model="prodActualizar.categoria" style="width: 100%;")
									ui-select-match(placeholder="Categoría" allow-clear="true") {{$select.selected.nombre}}
									ui-select-choices(repeat="categoria in categorias | filter: $select.search")
										div(ng-bind-html="categoria.nombre | highlight: $select.search")


						.row
							.col-lg-4.col-sm-6.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Precio costo $
									input(ng-model="prodActualizar.precio_costo" type="text" ui-money-mask="USER.deci_entrada" maxlength="20")

							.col-lg-4.col-sm-6.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Precio venta $
									input(ng-model="prodActualizar.precio_venta" type="text" ui-money-mask="USER.deci_salida" maxlength="20")


							.col-lg-4.col-sm-12.col-xs-12
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Cantidad mínima
									input(ng-model="prodActualizar.cantidad_minima" type="number" min="0")

						.row
							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Nota
									input(ng-model="prodActualizar.nota")

							.col-lg-4
								md-input-container.md-block(flex-gt-sm style="margin: 0!important; padding-bottom: 0!important")
									label Iva %
									input(type="text" ng-model="prodActualizar.iva" ui-percentage-mask="0" ui-percentage-value required)

							.col-lg-4
								.checkbox
									label
										input(type="checkbox" ng-model="prodActualizar.activo" ng-true-value="1" ng-false-value="0")
										| Activo

						.row
							.col-lg-12(style="text-align: center;margin-bottom: 40px")
								md-button.md-raised.md-default(type="button" ng-click="editando=false") Cancelar

								md-button.md-raised.md-primary(type="submit" ng-disabled="guardando") Actualizar




.row
	.col-lg-12
		.panel.panel-default.panel-hovered.mb20
			.panel-heading Productos

			.panel-body(style="overflow: auto")

				md-button(ng-click="crearProducto()" class="md-raised md-primary" ng-if="hasRole([USER_ROLES.administrador, USER_ROLES.tecnico])") Nuevo Producto


				div(ui-grid="opcionesGrid" ui-grid-auto-resize ui-grid-edit ui-grid-resize-columns ui-grid-exporter ui-grid-cellnav style="height: 600px")


